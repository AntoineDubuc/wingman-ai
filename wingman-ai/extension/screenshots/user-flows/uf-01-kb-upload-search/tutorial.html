<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UF-01: Knowledge Base Upload &amp; Search Flow</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            color: #1a1a2e;
            line-height: 1.6;
            padding: 2rem;
        }
        .container { max-width: 960px; margin: 0 auto; }
        header {
            text-align: center;
            margin-bottom: 2.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid #e0e0e0;
        }
        header h1 { font-size: 1.8rem; margin-bottom: 0.5rem; }
        header p.subtitle { color: #666; font-size: 1rem; }
        .meta {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1rem;
            font-size: 0.85rem;
            color: #888;
        }
        .meta span { display: flex; align-items: center; gap: 0.3rem; }
        .badge {
            display: inline-block;
            padding: 0.15rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .badge-pass { background: #d4edda; color: #155724; }
        .step {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            margin-bottom: 2rem;
            overflow: hidden;
        }
        .step-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            background: #f0f4ff;
            border-bottom: 1px solid #e0e6f0;
        }
        .step-number {
            background: #4361ee;
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }
        .step-title { font-weight: 600; font-size: 1.05rem; }
        .step-body { padding: 1.5rem; }
        .step-description { margin-bottom: 1rem; color: #444; }
        .step-screenshot {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }
        .step-screenshot img {
            width: 100%;
            display: block;
        }
        .step-screenshot figcaption {
            padding: 0.5rem 1rem;
            background: #fafafa;
            font-size: 0.8rem;
            color: #888;
            border-top: 1px solid #e0e0e0;
        }
        .summary {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            padding: 1.5rem;
            margin-top: 2rem;
        }
        .summary h2 { margin-bottom: 1rem; font-size: 1.2rem; }
        .summary ul { list-style: none; padding: 0; }
        .summary li {
            padding: 0.4rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .summary li::before {
            content: "\2713";
            color: #28a745;
            font-weight: 700;
        }
        footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #e0e0e0;
            font-size: 0.8rem;
            color: #aaa;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>UF-01: Knowledge Base Upload &amp; Search Flow</h1>
            <p class="subtitle">As a sales rep, I want to upload my battle card and verify that Wingman can answer questions from it.</p>
            <div class="meta">
                <span>Date: 2026-01-31</span>
                <span>Tester: Claude Code</span>
                <span><span class="badge badge-pass">Pass</span></span>
            </div>
        </header>

        <div class="step">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title">Open Options Page</div>
            </div>
            <div class="step-body">
                <p class="step-description">Navigate to the Wingman extension Options page. The page loads with the full settings UI including API keys, preferences, and the Knowledge Base section.</p>
                <figure class="step-screenshot">
                    <img src="01-options-page.png" alt="Options page initial state">
                    <figcaption>01-options-page.png &mdash; Full Options page loaded successfully</figcaption>
                </figure>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title">Verify KB Section</div>
            </div>
            <div class="step-body">
                <p class="step-description">The Knowledge Base section is visible with a heading, description text, and the file drop zone for uploading documents.</p>
                <figure class="step-screenshot">
                    <img src="02-kb-section.png" alt="KB section visible">
                    <figcaption>02-kb-section.png &mdash; Knowledge Base section with heading and drop zone</figcaption>
                </figure>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title">Verify Empty State</div>
            </div>
            <div class="step-body">
                <p class="step-description">Before any documents are uploaded, the empty state message &ldquo;No documents yet&rdquo; is displayed with a helpful hint to upload a battle card, FAQ, or product sheet.</p>
                <figure class="step-screenshot">
                    <img src="03-empty-state.png" alt="Empty state message">
                    <figcaption>03-empty-state.png &mdash; Empty state with &ldquo;No documents yet&rdquo; message</figcaption>
                </figure>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">4</div>
                <div class="step-title">Drop Zone Ready</div>
            </div>
            <div class="step-body">
                <p class="step-description">The drop zone renders with an upload icon, instructional text &ldquo;Drag files here or click to browse&rdquo;, and a hint showing supported formats (PDF, Markdown, Text) with the 10MB size limit.</p>
                <figure class="step-screenshot">
                    <img src="04-drop-zone.png" alt="Drop zone UI">
                    <figcaption>04-drop-zone.png &mdash; Drop zone with format hints and size limit</figcaption>
                </figure>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">5</div>
                <div class="step-title">Test Query Section Hidden</div>
            </div>
            <div class="step-body">
                <p class="step-description">The test query section is hidden when no documents are in the knowledge base. This prevents users from running queries against an empty index.</p>
                <figure class="step-screenshot">
                    <img src="05-test-hidden.png" alt="Test query section hidden">
                    <figcaption>05-test-hidden.png &mdash; Test query section correctly hidden (no documents)</figcaption>
                </figure>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">6</div>
                <div class="step-title">Document Uploaded</div>
            </div>
            <div class="step-body">
                <p class="step-description">After uploading a document (simulated via JavaScript injection), the document appears in the list with its filename, section count, and a delete button. The test query section becomes visible.</p>
                <figure class="step-screenshot">
                    <img src="06-document-uploaded.png" alt="Document in list">
                    <figcaption>06-document-uploaded.png &mdash; Document listed with metadata after upload</figcaption>
                </figure>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">7</div>
                <div class="step-title">Type Test Query</div>
            </div>
            <div class="step-body">
                <p class="step-description">Enter a test query &ldquo;What security certifications do you have?&rdquo; in the test input field to verify the search functionality against the uploaded document about SOC2/HIPAA certifications.</p>
                <figure class="step-screenshot">
                    <img src="07-query-typed.png" alt="Query typed in input">
                    <figcaption>07-query-typed.png &mdash; Test query entered in the search input</figcaption>
                </figure>
            </div>
        </div>

        <div class="step">
            <div class="step-header">
                <div class="step-number">8</div>
                <div class="step-title">Search Results Displayed</div>
            </div>
            <div class="step-body">
                <p class="step-description">After clicking &ldquo;Test&rdquo;, the search results appear showing the matching sections from the uploaded document. The results include the relevant text about SOC2 Type II, HIPAA, and ISO 27001 certifications with source attribution. API-level cosine similarity test confirmed: relevant query scored 0.7023 vs irrelevant query 0.4930.</p>
                <figure class="step-screenshot">
                    <img src="08-search-results.png" alt="Search results">
                    <figcaption>08-search-results.png &mdash; Search results showing matching KB sections</figcaption>
                </figure>
            </div>
        </div>

        <div class="summary">
            <h2>Test Summary</h2>
            <ul>
                <li>Empty state shown before upload</li>
                <li>Drop zone renders with correct format hints</li>
                <li>Test query section hidden when no documents exist</li>
                <li>Document appears in list after upload</li>
                <li>Test query section becomes visible after document ingestion</li>
                <li>Search returns relevant results from uploaded content</li>
                <li>Cosine similarity correctly ranks relevant queries higher (0.7023 &gt; 0.4930)</li>
                <li>All 8 screenshots captured as evidence</li>
            </ul>
        </div>

        <footer>
            <p>Generated by Claude Code &bull; Wingman AI Knowledge Base Testing &bull; 2026-01-31</p>
        </footer>
    </div>
</body>
</html>
